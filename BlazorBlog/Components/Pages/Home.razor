@page "/"
@layout SidebarLayout


@using BlazorBlog.Client.Components.UI.Blog
@using BlazorBlog.Client.Models
@using BlazorBlog.Client.Services.Interfaces
@using BlazorBlog.Components.Layout

@inject IBlogPostDTOService BlogService
@inject ICategoryDTOService CategoryService
@inject NavigationManager Nav


<PageTitle>BlazorBlog | Home</PageTitle>

<div>

    <!-- Blog posts -->

    <h1 class="pb-3 pb-lg-4">Blog list with sidebar</h1>

    <div>

        @foreach (BlogPostDTO blogPost in blogPosts)
        {
            <BlogPostCard BlogPost="blogPost" />
        }

    </div>

    <!-- Pagination -->
    <div class="row gy-3 align-items-center mt-lg-5 pt-2 pt-md-4 pt-lg-0">
        <div class="col col-md-4 col-6 order-md-1 order-1">
            <div class="d-flex align-items-center">
                <span class="text-body-secondary fs-sm">Show</span>
                <select class="form-select form-select-flush w-auto">
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="15">15</option>
                    <option value="25">25</option>
                </select>
            </div>
        </div>
        <div class="col col-md-4 col-12 order-md-2 order-3 text-center">
            <button class="btn btn-primary w-md-auto w-100" type="button">Load more posts</button>
        </div>
        <div class="col col-md-4 col-6 order-md-3 order-2">
            <nav aria-label="Page navigation">
                <ul class="pagination pagination-sm justify-content-end">
                    <li class="page-item active" aria-current="page">
                        <span class="page-link">1<span class="visually-hidden">(current)</span></span>
                    </li>
                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                    <li class="page-item"><a class="page-link" href="#">4</a></li>
                    <li class="page-item"><a class="page-link" href="#">5</a></li>
                </ul>
            </nav>
        </div>
    </div>

</div>



@code {

    #region parameters

    

    #endregion


    #region state

    private IEnumerable<BlogPostDTO> blogPosts = [];

    private IEnumerable<CategoryDTO> categories = [];

    #endregion


    #region methods

    protected override async Task OnInitializedAsync()
    {
        blogPosts = await BlogService.GetPublishedBlogPostsAsync();

        categories = await CategoryService.GetCategoriesAsync();
    }

    #endregion

}